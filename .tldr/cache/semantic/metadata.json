{
  "units": [
    {
      "name": "get_backend_status",
      "qualified_name": "backend.mcp_debug.py.get_backend_status",
      "file": "backend/mcp_debug.py",
      "line": 7,
      "language": "python",
      "unit_type": "function",
      "signature": "def get_backend_status()",
      "docstring": "Get the current status of the FastAPI backend.",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:1, blocks:2",
      "dfg_summary": "vars:3, def-use chains:1",
      "dependencies": "sys, mcp.server.fastmcp, requests",
      "code_preview": "def get_backend_status():\n    \"\"\"Get the current status of the FastAPI backend.\"\"\"\n    import requests\n    try:\n        response = requests.get(\"http://localhost:8000/health\", timeout=2)\n        return response.json()\n    except Exception as e:"
    },
    {
      "name": "install_skills",
      "qualified_name": "tools.distribute_skills.py.install_skills",
      "file": "tools/distribute_skills.py",
      "line": 17,
      "language": "python",
      "unit_type": "function",
      "signature": "def install_skills()",
      "docstring": "",
      "calls": [],
      "called_by": [
        "<module>"
      ],
      "cfg_summary": "complexity:8, blocks:20",
      "dfg_summary": "vars:12, def-use chains:25",
      "dependencies": "os, shutil, pathlib",
      "code_preview": "def install_skills():\n    print(\"--- Instalacja Skilli (Local script) ---\")\n    \n    for name, target_dir in targets.items():\n        print(f\"\\n[TARGET] {name}: {target_dir}\")\n        target_dir.mkdir(parents=True, exist_ok=True)\n        \n        for skill_dir in skills:\n            skill_name = skill_dir.name\n            "
    },
    {
      "name": "seed_defaults",
      "qualified_name": "backend.database.py.seed_defaults",
      "file": "backend/database.py",
      "line": 51,
      "language": "python",
      "unit_type": "function",
      "signature": "def seed_defaults(db_session)",
      "docstring": "Seed default presets if none exist.",
      "calls": [
        "GenerationPreset"
      ],
      "called_by": [
        "init_db"
      ],
      "cfg_summary": "complexity:3, blocks:7",
      "dfg_summary": "vars:4, def-use chains:3",
      "dependencies": "sqlalchemy, datetime, sqlalchemy.ext.declarative, sqlalchemy.orm",
      "code_preview": "def seed_defaults(db_session):\n    \"\"\"Seed default presets if none exist.\"\"\"\n    if db_session.query(GenerationPreset).first():\n        return\n\n    defaults = [\n        GenerationPreset(\n            name=\"Z-Image Turbo\",\n            prompt_positive=\"high quality, masterpiece\",\n            prompt_negative=\"blurry, text, watermark\","
    },
    {
      "name": "init_db",
      "qualified_name": "backend.database.py.init_db",
      "file": "backend/database.py",
      "line": 96,
      "language": "python",
      "unit_type": "function",
      "signature": "def init_db()",
      "docstring": "",
      "calls": [
        "seed_defaults"
      ],
      "called_by": [
        "<module>",
        "startup_event"
      ],
      "cfg_summary": "complexity:1, blocks:1",
      "dfg_summary": "vars:5, def-use chains:0",
      "dependencies": "sqlalchemy, datetime, sqlalchemy.ext.declarative, sqlalchemy.orm",
      "code_preview": "def init_db():\n    Base.metadata.create_all(bind=engine)\n    db = SessionLocal()\n    try:\n        seed_defaults(db)\n    finally:"
    },
    {
      "name": "get_db",
      "qualified_name": "backend.database.py.get_db",
      "file": "backend/database.py",
      "line": 104,
      "language": "python",
      "unit_type": "function",
      "signature": "def get_db()",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:1, blocks:1",
      "dfg_summary": "vars:2, def-use chains:0",
      "dependencies": "sqlalchemy, datetime, sqlalchemy.ext.declarative, sqlalchemy.orm",
      "code_preview": "def get_db():\n    db = SessionLocal()\n    try:\n        yield db\n    finally:"
    },
    {
      "name": "AppConfig",
      "qualified_name": "backend.database.py.AppConfig",
      "file": "backend/database.py",
      "line": 16,
      "language": "python",
      "unit_type": "class",
      "signature": "class AppConfig",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "",
      "dfg_summary": "",
      "dependencies": "sqlalchemy, datetime, sqlalchemy.ext.declarative, sqlalchemy.orm",
      "code_preview": ""
    },
    {
      "name": "GenerationPreset",
      "qualified_name": "backend.database.py.GenerationPreset",
      "file": "backend/database.py",
      "line": 22,
      "language": "python",
      "unit_type": "class",
      "signature": "class GenerationPreset",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "",
      "dfg_summary": "",
      "dependencies": "sqlalchemy, datetime, sqlalchemy.ext.declarative, sqlalchemy.orm",
      "code_preview": ""
    },
    {
      "name": "GalleryImage",
      "qualified_name": "backend.database.py.GalleryImage",
      "file": "backend/database.py",
      "line": 36,
      "language": "python",
      "unit_type": "class",
      "signature": "class GalleryImage",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "",
      "dfg_summary": "",
      "dependencies": "sqlalchemy, datetime, sqlalchemy.ext.declarative, sqlalchemy.orm",
      "code_preview": ""
    },
    {
      "name": "check_connection",
      "qualified_name": "backend.debug_conn.py.check_connection",
      "file": "backend/debug_conn.py",
      "line": 6,
      "language": "python",
      "unit_type": "function",
      "signature": "def check_connection(url)",
      "docstring": "",
      "calls": [],
      "called_by": [
        "main"
      ],
      "cfg_summary": "complexity:1, blocks:2",
      "dfg_summary": "vars:7, def-use chains:4",
      "dependencies": "asyncio, httpx, sys",
      "code_preview": "async def check_connection(url):\n    print(f\"Testing connection to {url}...\")\n    try:\n        async with httpx.AsyncClient(timeout=5.0) as client:\n            response = await client.get(f\"{url}/system_stats\")\n            print(f\"Status: {response.status_code}\")\n            print(f\"Response: {response.text[:100]}...\")\n            return True\n    except Exception as e:\n        print(f\"ERROR connecting to {url}: {type(e).__name__}: {e}\")"
    },
    {
      "name": "main",
      "qualified_name": "backend.debug_conn.py.main",
      "file": "backend/debug_conn.py",
      "line": 18,
      "language": "python",
      "unit_type": "function",
      "signature": "def main()",
      "docstring": "",
      "calls": [
        "get_json",
        "install_skill_files",
        "check_connection"
      ],
      "called_by": [
        "<module>",
        "<module>"
      ],
      "cfg_summary": "complexity:3, blocks:7",
      "dfg_summary": "vars:7, def-use chains:1",
      "dependencies": "asyncio, httpx, sys",
      "code_preview": "async def main():\n    urls = [\n        \"http://127.0.0.1:8188\",\n        \"http://localhost:8188\",\n        \"http://192.168.0.14:8188\"\n    ]\n    \n    results = []\n    for url in urls:\n        results.append(await check_connection(url))"
    },
    {
      "name": "startup_event",
      "qualified_name": "backend.main.py.startup_event",
      "file": "backend/main.py",
      "line": 31,
      "language": "python",
      "unit_type": "function",
      "signature": "def startup_event()",
      "docstring": "",
      "calls": [
        "get_manager",
        "init_db"
      ],
      "called_by": [],
      "cfg_summary": "complexity:1, blocks:1",
      "dfg_summary": "vars:10, def-use chains:0",
      "dependencies": "fastapi, fastapi.middleware.cors, logging, asyncio, routes.comfy",
      "code_preview": "async def startup_event():\n    # Set loop for logging\n    log_manager.loop = asyncio.get_running_loop()\n    \n    # Initialize DB\n    init_db()\n    \n    # Get Config from DB\n    db = SessionLocal()\n    try:"
    },
    {
      "name": "shutdown_event",
      "qualified_name": "backend.main.py.shutdown_event",
      "file": "backend/main.py",
      "line": 53,
      "language": "python",
      "unit_type": "function",
      "signature": "def shutdown_event()",
      "docstring": "",
      "calls": [
        "get_manager"
      ],
      "called_by": [],
      "cfg_summary": "complexity:1, blocks:1",
      "dfg_summary": "vars:3, def-use chains:0",
      "dependencies": "fastapi, fastapi.middleware.cors, logging, asyncio, routes.comfy",
      "code_preview": "async def shutdown_event():\n    manager = get_manager(DEFAULT_COMFYUI_URL)"
    },
    {
      "name": "health_check",
      "qualified_name": "backend.main.py.health_check",
      "file": "backend/main.py",
      "line": 73,
      "language": "python",
      "unit_type": "function",
      "signature": "def health_check()",
      "docstring": "Health check endpoint.",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:1, blocks:2",
      "dfg_summary": "vars:0, def-use chains:0",
      "dependencies": "fastapi, fastapi.middleware.cors, logging, asyncio, routes.comfy",
      "code_preview": "async def health_check():\n    \"\"\"Health check endpoint.\"\"\""
    },
    {
      "name": "root",
      "qualified_name": "backend.main.py.root",
      "file": "backend/main.py",
      "line": 79,
      "language": "python",
      "unit_type": "function",
      "signature": "def root()",
      "docstring": "Root endpoint.",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:1, blocks:2",
      "dfg_summary": "vars:0, def-use chains:0",
      "dependencies": "fastapi, fastapi.middleware.cors, logging, asyncio, routes.comfy",
      "code_preview": "async def root():\n    \"\"\"Root endpoint.\"\"\""
    },
    {
      "name": "logs_websocket_endpoint",
      "qualified_name": "backend.main.py.logs_websocket_endpoint",
      "file": "backend/main.py",
      "line": 84,
      "language": "python",
      "unit_type": "function",
      "signature": "def logs_websocket_endpoint(websocket: WebSocket)",
      "docstring": "WebSocket endpoint for real-time log streaming.",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:1, blocks:1",
      "dfg_summary": "vars:5, def-use chains:0",
      "dependencies": "fastapi, fastapi.middleware.cors, logging, asyncio, routes.comfy",
      "code_preview": "async def logs_websocket_endpoint(websocket: WebSocket):\n    \"\"\"WebSocket endpoint for real-time log streaming.\"\"\"\n    await websocket.accept()\n    logger.info(\"New client connected to log stream\")\n    try:\n        async for log_entry in log_manager.subscribe():\n            await websocket.send_json(log_entry)\n    except WebSocketDisconnect:\n        logger.info(\"Client disconnected from log stream\")\n    except Exception as e:"
    },
    {
      "name": "GalleryItemCreate",
      "qualified_name": "backend.schemas.common_schemas.py.GalleryItemCreate",
      "file": "backend/schemas/common_schemas.py",
      "line": 6,
      "language": "python",
      "unit_type": "class",
      "signature": "class GalleryItemCreate",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "",
      "dfg_summary": "",
      "dependencies": "datetime, typing, pydantic",
      "code_preview": ""
    },
    {
      "name": "Config",
      "qualified_name": "backend.schemas.common_schemas.py.Config",
      "file": "backend/schemas/common_schemas.py",
      "line": 42,
      "language": "python",
      "unit_type": "class",
      "signature": "class Config",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "",
      "dfg_summary": "",
      "dependencies": "datetime, typing, pydantic",
      "code_preview": ""
    },
    {
      "name": "GalleryItemResponse",
      "qualified_name": "backend.schemas.common_schemas.py.GalleryItemResponse",
      "file": "backend/schemas/common_schemas.py",
      "line": 17,
      "language": "python",
      "unit_type": "class",
      "signature": "class GalleryItemResponse",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "",
      "dfg_summary": "",
      "dependencies": "datetime, typing, pydantic",
      "code_preview": ""
    },
    {
      "name": "ConfigItem",
      "qualified_name": "backend.schemas.common_schemas.py.ConfigItem",
      "file": "backend/schemas/common_schemas.py",
      "line": 24,
      "language": "python",
      "unit_type": "class",
      "signature": "class ConfigItem",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "",
      "dfg_summary": "",
      "dependencies": "datetime, typing, pydantic",
      "code_preview": ""
    },
    {
      "name": "PresetCreate",
      "qualified_name": "backend.schemas.common_schemas.py.PresetCreate",
      "file": "backend/schemas/common_schemas.py",
      "line": 28,
      "language": "python",
      "unit_type": "class",
      "signature": "class PresetCreate",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "",
      "dfg_summary": "",
      "dependencies": "datetime, typing, pydantic",
      "code_preview": ""
    },
    {
      "name": "Config",
      "qualified_name": "backend.schemas.common_schemas.py.Config",
      "file": "backend/schemas/common_schemas.py",
      "line": 42,
      "language": "python",
      "unit_type": "class",
      "signature": "class Config",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "",
      "dfg_summary": "",
      "dependencies": "datetime, typing, pydantic",
      "code_preview": ""
    },
    {
      "name": "PresetResponse",
      "qualified_name": "backend.schemas.common_schemas.py.PresetResponse",
      "file": "backend/schemas/common_schemas.py",
      "line": 39,
      "language": "python",
      "unit_type": "class",
      "signature": "class PresetResponse",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "",
      "dfg_summary": "",
      "dependencies": "datetime, typing, pydantic",
      "code_preview": ""
    },
    {
      "name": "get_gallery",
      "qualified_name": "backend.routes.gallery.py.get_gallery",
      "file": "backend/routes/gallery.py",
      "line": 13,
      "language": "python",
      "unit_type": "function",
      "signature": "def get_gallery(limit: int, db: Session)",
      "docstring": "Get gallery images, newest first.",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:1, blocks:2",
      "dfg_summary": "vars:4, def-use chains:2",
      "dependencies": "fastapi, sqlalchemy.orm, sqlalchemy, typing, database",
      "code_preview": "def get_gallery(limit: int = 50, db: Session = Depends(get_db)):\n    \"\"\"Get gallery images, newest first.\"\"\""
    },
    {
      "name": "add_to_gallery",
      "qualified_name": "backend.routes.gallery.py.add_to_gallery",
      "file": "backend/routes/gallery.py",
      "line": 18,
      "language": "python",
      "unit_type": "function",
      "signature": "def add_to_gallery(item: GalleryItemCreate, db: Session)",
      "docstring": "Save an image reference to gallery.",
      "calls": [
        "GalleryImage"
      ],
      "called_by": [],
      "cfg_summary": "complexity:1, blocks:2",
      "dfg_summary": "vars:4, def-use chains:15",
      "dependencies": "fastapi, sqlalchemy.orm, sqlalchemy, typing, database",
      "code_preview": "def add_to_gallery(item: GalleryItemCreate, db: Session = Depends(get_db)):\n    \"\"\"Save an image reference to gallery.\"\"\"\n    db_item = GalleryImage(\n        filename=item.filename,\n        subfolder=item.subfolder,\n        prompt_positive=item.prompt_positive,\n        prompt_negative=item.prompt_negative,\n        model=item.model,\n        width=item.width,\n        height=item.height,"
    },
    {
      "name": "delete_from_gallery",
      "qualified_name": "backend.routes.gallery.py.delete_from_gallery",
      "file": "backend/routes/gallery.py",
      "line": 37,
      "language": "python",
      "unit_type": "function",
      "signature": "def delete_from_gallery(id: int, db: Session)",
      "docstring": "Remove image from gallery history (does not delete file).",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:2, blocks:4",
      "dfg_summary": "vars:5, def-use chains:7",
      "dependencies": "fastapi, sqlalchemy.orm, sqlalchemy, typing, database",
      "code_preview": "def delete_from_gallery(id: int, db: Session = Depends(get_db)):\n    \"\"\"Remove image from gallery history (does not delete file).\"\"\"\n    item = db.query(GalleryImage).filter(GalleryImage.id == id).first()\n    if not item:\n        raise HTTPException(status_code=404, detail=\"Image not found\")\n    \n    db.delete(item)\n    db.commit()"
    },
    {
      "name": "clear_gallery",
      "qualified_name": "backend.routes.gallery.py.clear_gallery",
      "file": "backend/routes/gallery.py",
      "line": 48,
      "language": "python",
      "unit_type": "function",
      "signature": "def clear_gallery(db: Session)",
      "docstring": "Clear all images from gallery history.",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:1, blocks:2",
      "dfg_summary": "vars:2, def-use chains:2",
      "dependencies": "fastapi, sqlalchemy.orm, sqlalchemy, typing, database",
      "code_preview": "def clear_gallery(db: Session = Depends(get_db)):\n    \"\"\"Clear all images from gallery history.\"\"\"\n    db.query(GalleryImage).delete()\n    db.commit()"
    },
    {
      "name": "ImageGenerateRequest",
      "qualified_name": "backend.schemas.comfy_schemas.py.ImageGenerateRequest",
      "file": "backend/schemas/comfy_schemas.py",
      "line": 5,
      "language": "python",
      "unit_type": "class",
      "signature": "class ImageGenerateRequest",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "",
      "dfg_summary": "",
      "dependencies": "typing, pydantic",
      "code_preview": ""
    },
    {
      "name": "ImageStatusResponse",
      "qualified_name": "backend.schemas.comfy_schemas.py.ImageStatusResponse",
      "file": "backend/schemas/comfy_schemas.py",
      "line": 19,
      "language": "python",
      "unit_type": "class",
      "signature": "class ImageStatusResponse",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "",
      "dfg_summary": "",
      "dependencies": "typing, pydantic",
      "code_preview": ""
    },
    {
      "name": "generate_and_verify",
      "qualified_name": "tests.test_aspect_ratios.py.generate_and_verify",
      "file": "tests/test_aspect_ratios.py",
      "line": 14,
      "language": "python",
      "unit_type": "function",
      "signature": "def generate_and_verify()",
      "docstring": "",
      "calls": [],
      "called_by": [
        "<module>"
      ],
      "cfg_summary": "complexity:15, blocks:43",
      "dfg_summary": "vars:28, def-use chains:56",
      "dependencies": "requests, time, json, sys",
      "code_preview": "def generate_and_verify():\n    failures = []\n    generated_files = []\n\n    print(f\"\ud83d\ude80 Starting Aspect Ratio Test for {len(TEST_CASES)} cases...\")\n\n    for case in TEST_CASES:\n        print(f\"\\nTesting {case['name']} ({case['width']}x{case['height']})...\")\n        \n        # 1. Generate"
    },
    {
      "name": "get_json",
      "qualified_name": "tools.install_remote.py.get_json",
      "file": "tools/install_remote.py",
      "line": 15,
      "language": "python",
      "unit_type": "function",
      "signature": "def get_json(url)",
      "docstring": "",
      "calls": [],
      "called_by": [
        "main"
      ],
      "cfg_summary": "complexity:1, blocks:2",
      "dfg_summary": "vars:5, def-use chains:2",
      "dependencies": "os, json, urllib.request, argparse, pathlib",
      "code_preview": "def get_json(url):\n    try:\n        with urllib.request.urlopen(url) as response:\n            return json.loads(response.read().decode())\n    except urllib.error.HTTPError as e:\n        if e.code == 404: return None"
    },
    {
      "name": "download_file",
      "qualified_name": "tools.install_remote.py.download_file",
      "file": "tools/install_remote.py",
      "line": 23,
      "language": "python",
      "unit_type": "function",
      "signature": "def download_file(file_url, dest_path)",
      "docstring": "",
      "calls": [],
      "called_by": [
        "install_skill_files"
      ],
      "cfg_summary": "complexity:1, blocks:2",
      "dfg_summary": "vars:9, def-use chains:5",
      "dependencies": "os, json, urllib.request, argparse, pathlib",
      "code_preview": "def download_file(file_url, dest_path):\n    try:\n        with urllib.request.urlopen(file_url) as response:\n            content = response.read()\n            with open(dest_path, \"wb\") as f:\n                f.write(content)\n        return True\n    except Exception as e:\n        print(f\" (!) Blad pobierania {file_url}: {e}\")"
    },
    {
      "name": "install_skill_files",
      "qualified_name": "tools.install_remote.py.install_skill_files",
      "file": "tools/install_remote.py",
      "line": 34,
      "language": "python",
      "unit_type": "function",
      "signature": "def install_skill_files(skill_name, skill_files, target_dir, flatten)",
      "docstring": "Instaluje pliki skilla w docelowym folderze",
      "calls": [
        "download_file"
      ],
      "called_by": [
        "main"
      ],
      "cfg_summary": "complexity:8, blocks:23",
      "dfg_summary": "vars:12, def-use chains:25",
      "dependencies": "os, json, urllib.request, argparse, pathlib",
      "code_preview": "def install_skill_files(skill_name, skill_files, target_dir, flatten=False):\n    \"\"\"Instaluje pliki skilla w docelowym folderze\"\"\"\n    \n    # Dla Cursora (flatten=True): .cursor/rules/skill-name.mdc\n    # Dla innych (flatten=False): target_dir/skill-name/SKILL.md\n    \n    final_dir = target_dir\n    if not flatten:\n        final_dir = target_dir / skill_name\n    "
    },
    {
      "name": "main",
      "qualified_name": "tools.install_remote.py.main",
      "file": "tools/install_remote.py",
      "line": 76,
      "language": "python",
      "unit_type": "function",
      "signature": "def main()",
      "docstring": "",
      "calls": [
        "get_json",
        "install_skill_files",
        "check_connection"
      ],
      "called_by": [
        "<module>",
        "<module>"
      ],
      "cfg_summary": "complexity:10, blocks:23",
      "dfg_summary": "vars:21, def-use chains:38",
      "dependencies": "os, json, urllib.request, argparse, pathlib",
      "code_preview": "def main():\n    parser = argparse.ArgumentParser(description=\"Instalator Skilli AI (Remote)\")\n    parser.add_argument(\"--antigravity\", action=\"store_true\", help=\"Instaluj dla Antigravity (~/.gemini/antigravity/skills)\")\n    parser.add_argument(\"--claude\", action=\"store_true\", help=\"Instaluj dla Claude (~/.claude/skills)\")\n    parser.add_argument(\"--cursor\", action=\"store_true\", help=\"Instaluj dla Cursora (./.cursor/rules)\")\n    parser.add_argument(\"--all\", action=\"store_true\", help=\"Instaluj dla wszystkich znalezionych\")\n    args = parser.parse_args()\n\n    # Wykrywanie sciezek\n    home = Path.home()"
    },
    {
      "name": "test_websocket_connection",
      "qualified_name": "backend.tests.test_ws.py.test_websocket_connection",
      "file": "backend/tests/test_ws.py",
      "line": 8,
      "language": "python",
      "unit_type": "function",
      "signature": "def test_websocket_connection()",
      "docstring": "Test connecting to the backend WebSocket endpoint.",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:1, blocks:1",
      "dfg_summary": "vars:4, def-use chains:0",
      "dependencies": "pytest, fastapi.testclient, main",
      "code_preview": "def test_websocket_connection():\n    \"\"\"Test connecting to the backend WebSocket endpoint.\"\"\"\n    print(\"\\n[TEST] Testing WebSocket connection...\")\n    with client.websocket_connect(\"/api/comfy/ws\") as websocket:\n        # If we connect without error, that's a pass\n        assert websocket\n        # Can also send a ping/pong if implemented\n        websocket.send_text(\"ping\")\n        data = websocket.receive_text()\n        assert data == \"pong\""
    },
    {
      "name": "test_health_check",
      "qualified_name": "backend.tests.test_health.py.test_health_check",
      "file": "backend/tests/test_health.py",
      "line": 13,
      "language": "python",
      "unit_type": "function",
      "signature": "def test_health_check()",
      "docstring": "Verify health endpoint returns OK.",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:1, blocks:1",
      "dfg_summary": "vars:3, def-use chains:0",
      "dependencies": "pytest, fastapi.testclient, main",
      "code_preview": "def test_health_check():\n    \"\"\"Verify health endpoint returns OK.\"\"\"\n    response = client.get(\"/health\")\n    assert response.status_code == 200\n    data = response.json()\n    assert data[\"status\"] == \"ok\""
    },
    {
      "name": "test_root",
      "qualified_name": "backend.tests.test_health.py.test_root",
      "file": "backend/tests/test_health.py",
      "line": 22,
      "language": "python",
      "unit_type": "function",
      "signature": "def test_root()",
      "docstring": "Verify root endpoint returns message.",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:1, blocks:1",
      "dfg_summary": "vars:3, def-use chains:0",
      "dependencies": "pytest, fastapi.testclient, main",
      "code_preview": "def test_root():\n    \"\"\"Verify root endpoint returns message.\"\"\"\n    response = client.get(\"/\")\n    assert response.status_code == 200\n    data = response.json()"
    },
    {
      "name": "get_config",
      "qualified_name": "backend.routes.persistence.py.get_config",
      "file": "backend/routes/persistence.py",
      "line": 14,
      "language": "python",
      "unit_type": "function",
      "signature": "def get_config(key: str, db: Session)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:2, blocks:4",
      "dfg_summary": "vars:5, def-use chains:5",
      "dependencies": "fastapi, sqlalchemy.orm, typing, database, schemas.common_schemas",
      "code_preview": "def get_config(key: str, db: Session = Depends(get_db)):\n    item = db.query(AppConfig).filter(AppConfig.key == key).first()\n    if not item:\n        raise HTTPException(status_code=404, detail=\"Config key not found\")"
    },
    {
      "name": "set_config",
      "qualified_name": "backend.routes.persistence.py.set_config",
      "file": "backend/routes/persistence.py",
      "line": 21,
      "language": "python",
      "unit_type": "function",
      "signature": "def set_config(item: ConfigItem, db: Session)",
      "docstring": "",
      "calls": [
        "AppConfig"
      ],
      "called_by": [],
      "cfg_summary": "complexity:2, blocks:5",
      "dfg_summary": "vars:4, def-use chains:14",
      "dependencies": "fastapi, sqlalchemy.orm, typing, database, schemas.common_schemas",
      "code_preview": "def set_config(item: ConfigItem, db: Session = Depends(get_db)):\n    db_item = db.query(AppConfig).filter(AppConfig.key == item.key).first()\n    if db_item:\n        db_item.value = item.value\n    else:\n        db_item = AppConfig(key=item.key, value=item.value)\n        db.add(db_item)\n    db.commit()\n    db.refresh(db_item)"
    },
    {
      "name": "get_all_config",
      "qualified_name": "backend.routes.persistence.py.get_all_config",
      "file": "backend/routes/persistence.py",
      "line": 33,
      "language": "python",
      "unit_type": "function",
      "signature": "def get_all_config(db: Session)",
      "docstring": "Get all settings as a dictionary.",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:1, blocks:2",
      "dfg_summary": "vars:4, def-use chains:2",
      "dependencies": "fastapi, sqlalchemy.orm, typing, database, schemas.common_schemas",
      "code_preview": "def get_all_config(db: Session = Depends(get_db)):\n    \"\"\"Get all settings as a dictionary.\"\"\"\n    items = db.query(AppConfig).all()"
    },
    {
      "name": "get_presets",
      "qualified_name": "backend.routes.persistence.py.get_presets",
      "file": "backend/routes/persistence.py",
      "line": 41,
      "language": "python",
      "unit_type": "function",
      "signature": "def get_presets(db: Session)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:1, blocks:2",
      "dfg_summary": "vars:2, def-use chains:1",
      "dependencies": "fastapi, sqlalchemy.orm, typing, database, schemas.common_schemas",
      "code_preview": "def get_presets(db: Session = Depends(get_db)):"
    },
    {
      "name": "create_preset",
      "qualified_name": "backend.routes.persistence.py.create_preset",
      "file": "backend/routes/persistence.py",
      "line": 45,
      "language": "python",
      "unit_type": "function",
      "signature": "def create_preset(preset: PresetCreate, db: Session)",
      "docstring": "",
      "calls": [
        "GenerationPreset"
      ],
      "called_by": [],
      "cfg_summary": "complexity:2, blocks:4",
      "dfg_summary": "vars:5, def-use chains:17",
      "dependencies": "fastapi, sqlalchemy.orm, typing, database, schemas.common_schemas",
      "code_preview": "def create_preset(preset: PresetCreate, db: Session = Depends(get_db)):\n    # Check if name exists\n    if db.query(GenerationPreset).filter(GenerationPreset.name == preset.name).first():\n        raise HTTPException(status_code=400, detail=\"Preset name already exists\")\n\n    db_preset = GenerationPreset(\n        name=preset.name,\n        prompt_positive=preset.prompt_positive,\n        prompt_negative=preset.prompt_negative,\n        model=preset.model,"
    },
    {
      "name": "delete_preset",
      "qualified_name": "backend.routes.persistence.py.delete_preset",
      "file": "backend/routes/persistence.py",
      "line": 67,
      "language": "python",
      "unit_type": "function",
      "signature": "def delete_preset(name: str, db: Session)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:2, blocks:4",
      "dfg_summary": "vars:5, def-use chains:7",
      "dependencies": "fastapi, sqlalchemy.orm, typing, database, schemas.common_schemas",
      "code_preview": "def delete_preset(name: str, db: Session = Depends(get_db)):\n    preset = db.query(GenerationPreset).filter(GenerationPreset.name == name).first()\n    if not preset:\n        raise HTTPException(status_code=404, detail=\"Preset not found\")\n    \n    db.delete(preset)\n    db.commit()"
    },
    {
      "name": "test_health_check_real_connection",
      "qualified_name": "backend.tests.test_comfy_integration.py.test_health_check_real_connection",
      "file": "backend/tests/test_comfy_integration.py",
      "line": 14,
      "language": "python",
      "unit_type": "function",
      "signature": "def test_health_check_real_connection()",
      "docstring": "Test connection to the real ComfyUI instance.\nRequires ComfyUI to be running at the configured URL.",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:2, blocks:3",
      "dfg_summary": "vars:7, def-use chains:6",
      "dependencies": "pytest, fastapi.testclient, main, logging, json",
      "code_preview": "def test_health_check_real_connection():\n    \"\"\"\n    Test connection to the real ComfyUI instance.\n    Requires ComfyUI to be running at the configured URL.\n    \"\"\"\n    print(\"\\n[TEST] Checking ComfyUI health...\")\n    response = client.get(\"/api/comfy/health\")\n    \n    # Print response for verbose debugging\n    print(f\"[DEBUG] Health Response: {json.dumps(response.json(), indent=2)}\")"
    },
    {
      "name": "test_get_available_models_real",
      "qualified_name": "backend.tests.test_comfy_integration.py.test_get_available_models_real",
      "file": "backend/tests/test_comfy_integration.py",
      "line": 37,
      "language": "python",
      "unit_type": "function",
      "signature": "def test_get_available_models_real()",
      "docstring": "Test retrieving real models from ComfyUI.",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:4, blocks:8",
      "dfg_summary": "vars:11, def-use chains:13",
      "dependencies": "pytest, fastapi.testclient, main, logging, json",
      "code_preview": "def test_get_available_models_real():\n    \"\"\"\n    Test retrieving real models from ComfyUI.\n    \"\"\"\n    print(\"\\n[TEST] Fetching available models...\")\n    response = client.get(\"/api/comfy/models\")\n    \n    print(f\"[DEBUG] Models Response Status: {response.status_code}\")\n    \n    assert response.status_code == 200"
    },
    {
      "name": "test_get_available_loras_real",
      "qualified_name": "backend.tests.test_comfy_integration.py.test_get_available_loras_real",
      "file": "backend/tests/test_comfy_integration.py",
      "line": 69,
      "language": "python",
      "unit_type": "function",
      "signature": "def test_get_available_loras_real()",
      "docstring": "Test retrieving real LoRAs from ComfyUI.",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:3, blocks:6",
      "dfg_summary": "vars:9, def-use chains:9",
      "dependencies": "pytest, fastapi.testclient, main, logging, json",
      "code_preview": "def test_get_available_loras_real():\n    \"\"\"\n    Test retrieving real LoRAs from ComfyUI.\n    \"\"\"\n    print(\"\\n[TEST] Fetching available LoRAs...\")\n    response = client.get(\"/api/comfy/loras\")\n    \n    assert response.status_code == 200\n    data = response.json()\n    "
    },
    {
      "name": "test_generate_image_submission_real",
      "qualified_name": "backend.tests.test_comfy_integration.py.test_generate_image_submission_real",
      "file": "backend/tests/test_comfy_integration.py",
      "line": 93,
      "language": "python",
      "unit_type": "function",
      "signature": "def test_generate_image_submission_real()",
      "docstring": "Test submitting a real generation request.\nNote: This sends a real job to the GPU queue.",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:2, blocks:3",
      "dfg_summary": "vars:10, def-use chains:4",
      "dependencies": "pytest, fastapi.testclient, main, logging, json",
      "code_preview": "def test_generate_image_submission_real():\n    \"\"\"\n    Test submitting a real generation request.\n    Note: This sends a real job to the GPU queue.\n    \"\"\"\n    print(\"\\n[TEST] Submitting generation job...\")\n    \n    payload = {\n        \"positive_prompt\": \"A futuristic city with neon lights, cinematic lighting, 8k\",\n        \"negative_prompt\": \"blurry, low quality, text, watermark\","
    },
    {
      "name": "example_node",
      "qualified_name": "knowledge.claude-code-comfyui-nodes.tests.test_claude_code_comfyui_nodes.py.example_node",
      "file": "knowledge/claude-code-comfyui-nodes/tests/test_claude_code_comfyui_nodes.py",
      "line": 9,
      "language": "python",
      "unit_type": "function",
      "signature": "def example_node()",
      "docstring": "Fixture to create an Example node instance.",
      "calls": [],
      "called_by": [
        "test_example_node_initialization"
      ],
      "cfg_summary": "complexity:1, blocks:2",
      "dfg_summary": "vars:1, def-use chains:0",
      "dependencies": "pytest, src.claude_code_comfyui_nodes.nodes",
      "code_preview": "def example_node():\n    \"\"\"Fixture to create an Example node instance.\"\"\""
    },
    {
      "name": "test_example_node_initialization",
      "qualified_name": "knowledge.claude-code-comfyui-nodes.tests.test_claude_code_comfyui_nodes.py.test_example_node_initialization",
      "file": "knowledge/claude-code-comfyui-nodes/tests/test_claude_code_comfyui_nodes.py",
      "line": 13,
      "language": "python",
      "unit_type": "function",
      "signature": "def test_example_node_initialization(example_node)",
      "docstring": "Test that the node can be instantiated.",
      "calls": [
        "example_node"
      ],
      "called_by": [],
      "cfg_summary": "complexity:1, blocks:1",
      "dfg_summary": "vars:3, def-use chains:0",
      "dependencies": "pytest, src.claude_code_comfyui_nodes.nodes",
      "code_preview": "def test_example_node_initialization(example_node):\n    \"\"\"Test that the node can be instantiated.\"\"\""
    },
    {
      "name": "test_return_types",
      "qualified_name": "knowledge.claude-code-comfyui-nodes.tests.test_claude_code_comfyui_nodes.py.test_return_types",
      "file": "knowledge/claude-code-comfyui-nodes/tests/test_claude_code_comfyui_nodes.py",
      "line": 17,
      "language": "python",
      "unit_type": "function",
      "signature": "def test_return_types()",
      "docstring": "Test the node's metadata.",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:1, blocks:1",
      "dfg_summary": "vars:1, def-use chains:0",
      "dependencies": "pytest, src.claude_code_comfyui_nodes.nodes",
      "code_preview": "def test_return_types():\n    \"\"\"Test the node's metadata.\"\"\"\n    assert Example.RETURN_TYPES == (\"IMAGE\",)\n    assert Example.FUNCTION == \"test\""
    },
    {
      "name": "emit",
      "qualified_name": "backend.services.logging_service.py.emit",
      "file": "backend/services/logging_service.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def emit(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:2, blocks:4",
      "dfg_summary": "vars:7, def-use chains:2",
      "dependencies": "logging, sys, loguru, typing, asyncio",
      "code_preview": ""
    },
    {
      "name": "__init__",
      "qualified_name": "backend.services.logging_service.py.__init__",
      "file": "backend/services/logging_service.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def __init__(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:1, blocks:1",
      "dfg_summary": "vars:2, def-use chains:0",
      "dependencies": "logging, sys, loguru, typing, asyncio",
      "code_preview": ""
    },
    {
      "name": "setup_logging",
      "qualified_name": "backend.services.logging_service.py.setup_logging",
      "file": "backend/services/logging_service.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def setup_logging(...)",
      "docstring": "",
      "calls": [
        "InterceptHandler"
      ],
      "called_by": [],
      "cfg_summary": "complexity:1, blocks:1",
      "dfg_summary": "vars:5, def-use chains:0",
      "dependencies": "logging, sys, loguru, typing, asyncio",
      "code_preview": ""
    },
    {
      "name": "log_sink",
      "qualified_name": "backend.services.logging_service.py.log_sink",
      "file": "backend/services/logging_service.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def log_sink(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:3, blocks:6",
      "dfg_summary": "vars:5, def-use chains:13",
      "dependencies": "logging, sys, loguru, typing, asyncio",
      "code_preview": ""
    },
    {
      "name": "subscribe",
      "qualified_name": "backend.services.logging_service.py.subscribe",
      "file": "backend/services/logging_service.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def subscribe(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:3, blocks:6",
      "dfg_summary": "vars:3, def-use chains:1",
      "dependencies": "logging, sys, loguru, typing, asyncio",
      "code_preview": ""
    },
    {
      "name": "InterceptHandler",
      "qualified_name": "backend.services.logging_service.py.InterceptHandler",
      "file": "backend/services/logging_service.py",
      "line": 7,
      "language": "python",
      "unit_type": "class",
      "signature": "class InterceptHandler",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "",
      "dfg_summary": "",
      "dependencies": "logging, sys, loguru, typing, asyncio",
      "code_preview": ""
    },
    {
      "name": "LogStreamManager",
      "qualified_name": "backend.services.logging_service.py.LogStreamManager",
      "file": "backend/services/logging_service.py",
      "line": 23,
      "language": "python",
      "unit_type": "class",
      "signature": "class LogStreamManager",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "",
      "dfg_summary": "",
      "dependencies": "logging, sys, loguru, typing, asyncio",
      "code_preview": ""
    },
    {
      "name": "build_comfy_workflow",
      "qualified_name": "backend.services.workflow_service.py.build_comfy_workflow",
      "file": "backend/services/workflow_service.py",
      "line": 40,
      "language": "python",
      "unit_type": "function",
      "signature": "def build_comfy_workflow(request: ImageGenerateRequest) -> Dict[str, Any]",
      "docstring": "Build the ComfyUI API JSON workflow from the user request.",
      "calls": [],
      "called_by": [
        "generate_image"
      ],
      "cfg_summary": "complexity:10, blocks:24",
      "dfg_summary": "vars:18, def-use chains:36",
      "dependencies": "random, json, typing, schemas.comfy_schemas",
      "code_preview": "def build_comfy_workflow(request: ImageGenerateRequest) -> Dict[str, Any]:\n    \"\"\"Build the ComfyUI API JSON workflow from the user request.\"\"\"\n    # Select Base Workflow based on model name\n    model_name = request.model or \"\"\n    \n    if \"flux\" in model_name.lower():\n        base_workflow = FLUX_WORKFLOW\n        workflow_type = \"flux\"\n    elif \"basic\" in model_name.lower() or \"v1-5\" in model_name.lower():\n        base_workflow = BASIC_WORKFLOW"
    },
    {
      "name": "INPUT_TYPES",
      "qualified_name": "knowledge.claude-code-comfyui-nodes.src.claude_code_comfyui_nodes.claude_code_tools.py.INPUT_TYPES",
      "file": "knowledge/claude-code-comfyui-nodes/src/claude_code_comfyui_nodes/claude_code_tools.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def INPUT_TYPES(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:1, blocks:2",
      "dfg_summary": "vars:2, def-use chains:0",
      "dependencies": "typing",
      "code_preview": ""
    },
    {
      "name": "configure_tools",
      "qualified_name": "knowledge.claude-code-comfyui-nodes.src.claude_code_comfyui_nodes.claude_code_tools.py.configure_tools",
      "file": "knowledge/claude-code-comfyui-nodes/src/claude_code_comfyui_nodes/claude_code_tools.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def configure_tools(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:10, blocks:20",
      "dfg_summary": "vars:21, def-use chains:37",
      "dependencies": "typing",
      "code_preview": ""
    },
    {
      "name": "ClaudeCodeTools",
      "qualified_name": "knowledge.claude-code-comfyui-nodes.src.claude_code_comfyui_nodes.claude_code_tools.py.ClaudeCodeTools",
      "file": "knowledge/claude-code-comfyui-nodes/src/claude_code_comfyui_nodes/claude_code_tools.py",
      "line": 4,
      "language": "python",
      "unit_type": "class",
      "signature": "class ClaudeCodeTools",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "",
      "dfg_summary": "",
      "dependencies": "typing",
      "code_preview": ""
    },
    {
      "name": "INPUT_TYPES",
      "qualified_name": "knowledge.claude-code-comfyui-nodes.src.claude_code_comfyui_nodes.claude_code_reader.py.INPUT_TYPES",
      "file": "knowledge/claude-code-comfyui-nodes/src/claude_code_comfyui_nodes/claude_code_reader.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def INPUT_TYPES(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:1, blocks:2",
      "dfg_summary": "vars:1, def-use chains:0",
      "dependencies": "os, json, typing, glob",
      "code_preview": ""
    },
    {
      "name": "__init__",
      "qualified_name": "knowledge.claude-code-comfyui-nodes.src.claude_code_comfyui_nodes.claude_code_reader.py.__init__",
      "file": "knowledge/claude-code-comfyui-nodes/src/claude_code_comfyui_nodes/claude_code_reader.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def __init__(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:1, blocks:1",
      "dfg_summary": "vars:2, def-use chains:0",
      "dependencies": "os, json, typing, glob",
      "code_preview": ""
    },
    {
      "name": "read_output",
      "qualified_name": "knowledge.claude-code-comfyui-nodes.src.claude_code_comfyui_nodes.claude_code_reader.py.read_output",
      "file": "knowledge/claude-code-comfyui-nodes/src/claude_code_comfyui_nodes/claude_code_reader.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def read_output(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:10, blocks:27",
      "dfg_summary": "vars:25, def-use chains:47",
      "dependencies": "os, json, typing, glob",
      "code_preview": ""
    },
    {
      "name": "ClaudeCodeReader",
      "qualified_name": "knowledge.claude-code-comfyui-nodes.src.claude_code_comfyui_nodes.claude_code_reader.py.ClaudeCodeReader",
      "file": "knowledge/claude-code-comfyui-nodes/src/claude_code_comfyui_nodes/claude_code_reader.py",
      "line": 6,
      "language": "python",
      "unit_type": "class",
      "signature": "class ClaudeCodeReader",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "",
      "dfg_summary": "",
      "dependencies": "os, json, typing, glob",
      "code_preview": ""
    },
    {
      "name": "get_memory_files",
      "qualified_name": "knowledge.claude-code-comfyui-nodes.src.claude_code_comfyui_nodes.claude_code_memory.py.get_memory_files",
      "file": "knowledge/claude-code-comfyui-nodes/src/claude_code_comfyui_nodes/claude_code_memory.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def get_memory_files(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:4, blocks:9",
      "dfg_summary": "vars:7, def-use chains:7",
      "dependencies": "os, typing",
      "code_preview": ""
    },
    {
      "name": "INPUT_TYPES",
      "qualified_name": "knowledge.claude-code-comfyui-nodes.src.claude_code_comfyui_nodes.claude_code_memory.py.INPUT_TYPES",
      "file": "knowledge/claude-code-comfyui-nodes/src/claude_code_comfyui_nodes/claude_code_memory.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def INPUT_TYPES(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:1, blocks:2",
      "dfg_summary": "vars:1, def-use chains:0",
      "dependencies": "os, typing",
      "code_preview": ""
    },
    {
      "name": "build_memory",
      "qualified_name": "knowledge.claude-code-comfyui-nodes.src.claude_code_comfyui_nodes.claude_code_memory.py.build_memory",
      "file": "knowledge/claude-code-comfyui-nodes/src/claude_code_comfyui_nodes/claude_code_memory.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def build_memory(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:17, blocks:41",
      "dfg_summary": "vars:18, def-use chains:66",
      "dependencies": "os, typing",
      "code_preview": ""
    },
    {
      "name": "ClaudeCodeMemory",
      "qualified_name": "knowledge.claude-code-comfyui-nodes.src.claude_code_comfyui_nodes.claude_code_memory.py.ClaudeCodeMemory",
      "file": "knowledge/claude-code-comfyui-nodes/src/claude_code_comfyui_nodes/claude_code_memory.py",
      "line": 5,
      "language": "python",
      "unit_type": "class",
      "signature": "class ClaudeCodeMemory",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "",
      "dfg_summary": "",
      "dependencies": "os, typing",
      "code_preview": ""
    },
    {
      "name": "INPUT_TYPES",
      "qualified_name": "knowledge.claude-code-comfyui-nodes.src.claude_code_comfyui_nodes.claude_code_mcp.py.INPUT_TYPES",
      "file": "knowledge/claude-code-comfyui-nodes/src/claude_code_comfyui_nodes/claude_code_mcp.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def INPUT_TYPES(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:1, blocks:2",
      "dfg_summary": "vars:1, def-use chains:0",
      "dependencies": "json, subprocess, typing",
      "code_preview": ""
    },
    {
      "name": "get_mcp_list",
      "qualified_name": "knowledge.claude-code-comfyui-nodes.src.claude_code_comfyui_nodes.claude_code_mcp.py.get_mcp_list",
      "file": "knowledge/claude-code-comfyui-nodes/src/claude_code_comfyui_nodes/claude_code_mcp.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def get_mcp_list(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:2, blocks:6",
      "dfg_summary": "vars:4, def-use chains:2",
      "dependencies": "json, subprocess, typing",
      "code_preview": ""
    },
    {
      "name": "manage_mcp",
      "qualified_name": "knowledge.claude-code-comfyui-nodes.src.claude_code_comfyui_nodes.claude_code_mcp.py.manage_mcp",
      "file": "knowledge/claude-code-comfyui-nodes/src/claude_code_comfyui_nodes/claude_code_mcp.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def manage_mcp(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:13, blocks:42",
      "dfg_summary": "vars:19, def-use chains:39",
      "dependencies": "json, subprocess, typing",
      "code_preview": ""
    },
    {
      "name": "ClaudeCodeMCP",
      "qualified_name": "knowledge.claude-code-comfyui-nodes.src.claude_code_comfyui_nodes.claude_code_mcp.py.ClaudeCodeMCP",
      "file": "knowledge/claude-code-comfyui-nodes/src/claude_code_comfyui_nodes/claude_code_mcp.py",
      "line": 6,
      "language": "python",
      "unit_type": "class",
      "signature": "class ClaudeCodeMCP",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "",
      "dfg_summary": "",
      "dependencies": "json, subprocess, typing",
      "code_preview": ""
    },
    {
      "name": "INPUT_TYPES",
      "qualified_name": "knowledge.claude-code-comfyui-nodes.src.claude_code_comfyui_nodes.claude_code_arguments.py.INPUT_TYPES",
      "file": "knowledge/claude-code-comfyui-nodes/src/claude_code_comfyui_nodes/claude_code_arguments.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def INPUT_TYPES(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:1, blocks:2",
      "dfg_summary": "vars:1, def-use chains:0",
      "dependencies": "json, typing",
      "code_preview": ""
    },
    {
      "name": "build_arguments",
      "qualified_name": "knowledge.claude-code-comfyui-nodes.src.claude_code_comfyui_nodes.claude_code_arguments.py.build_arguments",
      "file": "knowledge/claude-code-comfyui-nodes/src/claude_code_comfyui_nodes/claude_code_arguments.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def build_arguments(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:7, blocks:16",
      "dfg_summary": "vars:17, def-use chains:20",
      "dependencies": "json, typing",
      "code_preview": ""
    },
    {
      "name": "ClaudeCodeArguments",
      "qualified_name": "knowledge.claude-code-comfyui-nodes.src.claude_code_comfyui_nodes.claude_code_arguments.py.ClaudeCodeArguments",
      "file": "knowledge/claude-code-comfyui-nodes/src/claude_code_comfyui_nodes/claude_code_arguments.py",
      "line": 5,
      "language": "python",
      "unit_type": "class",
      "signature": "class ClaudeCodeArguments",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "",
      "dfg_summary": "",
      "dependencies": "json, typing",
      "code_preview": ""
    },
    {
      "name": "INPUT_TYPES",
      "qualified_name": "knowledge.claude-code-comfyui-nodes.src.claude_code_comfyui_nodes.claude_code_context.py.INPUT_TYPES",
      "file": "knowledge/claude-code-comfyui-nodes/src/claude_code_comfyui_nodes/claude_code_context.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def INPUT_TYPES(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:1, blocks:2",
      "dfg_summary": "vars:1, def-use chains:0",
      "dependencies": "os, json, typing, pathlib",
      "code_preview": ""
    },
    {
      "name": "__init__",
      "qualified_name": "knowledge.claude-code-comfyui-nodes.src.claude_code_comfyui_nodes.claude_code_context.py.__init__",
      "file": "knowledge/claude-code-comfyui-nodes/src/claude_code_comfyui_nodes/claude_code_context.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def __init__(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:1, blocks:1",
      "dfg_summary": "vars:2, def-use chains:0",
      "dependencies": "os, json, typing, pathlib",
      "code_preview": ""
    },
    {
      "name": "build_context",
      "qualified_name": "knowledge.claude-code-comfyui-nodes.src.claude_code_comfyui_nodes.claude_code_context.py.build_context",
      "file": "knowledge/claude-code-comfyui-nodes/src/claude_code_comfyui_nodes/claude_code_context.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def build_context(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:19, blocks:50",
      "dfg_summary": "vars:37, def-use chains:90",
      "dependencies": "os, json, typing, pathlib",
      "code_preview": ""
    },
    {
      "name": "ClaudeCodeContext",
      "qualified_name": "knowledge.claude-code-comfyui-nodes.src.claude_code_comfyui_nodes.claude_code_context.py.ClaudeCodeContext",
      "file": "knowledge/claude-code-comfyui-nodes/src/claude_code_comfyui_nodes/claude_code_context.py",
      "line": 7,
      "language": "python",
      "unit_type": "class",
      "signature": "class ClaudeCodeContext",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "",
      "dfg_summary": "",
      "dependencies": "os, json, typing, pathlib",
      "code_preview": ""
    },
    {
      "name": "get_manager",
      "qualified_name": "backend.services.websocket_manager.py.get_manager",
      "file": "backend/services/websocket_manager.py",
      "line": 192,
      "language": "python",
      "unit_type": "function",
      "signature": "def get_manager(base_url: str) -> ComfyWebSocketManager",
      "docstring": "",
      "calls": [
        "ComfyWebSocketManager"
      ],
      "called_by": [
        "generate_image",
        "websocket_endpoint",
        "shutdown_event",
        "startup_event"
      ],
      "cfg_summary": "complexity:3, blocks:6",
      "dfg_summary": "vars:5, def-use chains:6",
      "dependencies": "asyncio, json, loguru, websockets, typing",
      "code_preview": "def get_manager(base_url: str) -> ComfyWebSocketManager:\n    if base_url not in managers:\n        managers[base_url] = ComfyWebSocketManager(base_url)\n        # Try to start it if loop is running\n        try:\n            loop = asyncio.get_running_loop()\n            if loop.is_running():\n                loop.create_task(managers[base_url].connect())\n        except RuntimeError:\n            pass # No loop yet, will be started by main.py"
    },
    {
      "name": "__init__",
      "qualified_name": "backend.services.websocket_manager.py.__init__",
      "file": "backend/services/websocket_manager.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def __init__(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:1, blocks:1",
      "dfg_summary": "vars:3, def-use chains:0",
      "dependencies": "asyncio, json, loguru, websockets, typing",
      "code_preview": ""
    },
    {
      "name": "connect",
      "qualified_name": "backend.services.websocket_manager.py.connect",
      "file": "backend/services/websocket_manager.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def connect(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:2, blocks:4",
      "dfg_summary": "vars:7, def-use chains:8",
      "dependencies": "asyncio, json, loguru, websockets, typing",
      "code_preview": ""
    },
    {
      "name": "register_metadata",
      "qualified_name": "backend.services.websocket_manager.py.register_metadata",
      "file": "backend/services/websocket_manager.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def register_metadata(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:1, blocks:1",
      "dfg_summary": "vars:5, def-use chains:0",
      "dependencies": "asyncio, json, loguru, websockets, typing",
      "code_preview": ""
    },
    {
      "name": "_listen",
      "qualified_name": "backend.services.websocket_manager.py._listen",
      "file": "backend/services/websocket_manager.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def _listen(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:10, blocks:25",
      "dfg_summary": "vars:14, def-use chains:27",
      "dependencies": "asyncio, json, loguru, websockets, typing",
      "code_preview": ""
    },
    {
      "name": "_auto_save_images",
      "qualified_name": "backend.services.websocket_manager.py._auto_save_images",
      "file": "backend/services/websocket_manager.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def _auto_save_images(...)",
      "docstring": "",
      "calls": [
        "GalleryImage"
      ],
      "called_by": [],
      "cfg_summary": "complexity:9, blocks:23",
      "dfg_summary": "vars:22, def-use chains:46",
      "dependencies": "asyncio, json, loguru, websockets, typing",
      "code_preview": ""
    },
    {
      "name": "disconnect",
      "qualified_name": "backend.services.websocket_manager.py.disconnect",
      "file": "backend/services/websocket_manager.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def disconnect(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:2, blocks:3",
      "dfg_summary": "vars:1, def-use chains:2",
      "dependencies": "asyncio, json, loguru, websockets, typing",
      "code_preview": ""
    },
    {
      "name": "add_client",
      "qualified_name": "backend.services.websocket_manager.py.add_client",
      "file": "backend/services/websocket_manager.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def add_client(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:1, blocks:1",
      "dfg_summary": "vars:2, def-use chains:0",
      "dependencies": "asyncio, json, loguru, websockets, typing",
      "code_preview": ""
    },
    {
      "name": "remove_client",
      "qualified_name": "backend.services.websocket_manager.py.remove_client",
      "file": "backend/services/websocket_manager.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def remove_client(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:1, blocks:1",
      "dfg_summary": "vars:2, def-use chains:0",
      "dependencies": "asyncio, json, loguru, websockets, typing",
      "code_preview": ""
    },
    {
      "name": "_broadcast",
      "qualified_name": "backend.services.websocket_manager.py._broadcast",
      "file": "backend/services/websocket_manager.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def _broadcast(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:3, blocks:7",
      "dfg_summary": "vars:6, def-use chains:6",
      "dependencies": "asyncio, json, loguru, websockets, typing",
      "code_preview": ""
    },
    {
      "name": "ComfyWebSocketManager",
      "qualified_name": "backend.services.websocket_manager.py.ComfyWebSocketManager",
      "file": "backend/services/websocket_manager.py",
      "line": 8,
      "language": "python",
      "unit_type": "class",
      "signature": "class ComfyWebSocketManager",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "",
      "dfg_summary": "",
      "dependencies": "asyncio, json, loguru, websockets, typing",
      "code_preview": ""
    },
    {
      "name": "get_comfy_url",
      "qualified_name": "backend.routes.comfy.py.get_comfy_url",
      "file": "backend/routes/comfy.py",
      "line": 27,
      "language": "python",
      "unit_type": "function",
      "signature": "def get_comfy_url(db: Session) -> str",
      "docstring": "Get ComfyUI URL from DB or default.",
      "calls": [],
      "called_by": [
        "comfy_health",
        "interrupt_generation",
        "get_image",
        "generate_image",
        "check_status"
      ],
      "cfg_summary": "complexity:1, blocks:2",
      "dfg_summary": "vars:4, def-use chains:3",
      "dependencies": "random, logging, typing, httpx, fastapi",
      "code_preview": "def get_comfy_url(db: Session) -> str:\n    \"\"\"Get ComfyUI URL from DB or default.\"\"\"\n    config = db.query(AppConfig).filter(AppConfig.key == \"comfyui_url\").first()"
    },
    {
      "name": "comfy_health",
      "qualified_name": "backend.routes.comfy.py.comfy_health",
      "file": "backend/routes/comfy.py",
      "line": 33,
      "language": "python",
      "unit_type": "function",
      "signature": "def comfy_health(db: Session)",
      "docstring": "Check if ComfyUI is online.",
      "calls": [
        "get_comfy_url"
      ],
      "called_by": [],
      "cfg_summary": "complexity:2, blocks:5",
      "dfg_summary": "vars:10, def-use chains:7",
      "dependencies": "random, logging, typing, httpx, fastapi",
      "code_preview": "async def comfy_health(db: Session = Depends(get_db)):\n    \"\"\"Check if ComfyUI is online.\"\"\"\n    url = get_comfy_url(db)\n    try:\n        async with httpx.AsyncClient(timeout=5.0, trust_env=False) as client:\n            response = await client.get(f\"{url}/system_stats\")\n            if response.status_code == 200:\n                data = response.json()\n                return {\n                    \"status\": \"connected\","
    },
    {
      "name": "get_queue",
      "qualified_name": "backend.routes.comfy.py.get_queue",
      "file": "backend/routes/comfy.py",
      "line": 52,
      "language": "python",
      "unit_type": "function",
      "signature": "def get_queue(db: Session)",
      "docstring": "Get ComfyUI queue status.",
      "calls": [
        "get_comfy_url"
      ],
      "called_by": [],
      "cfg_summary": "complexity:1, blocks:2",
      "dfg_summary": "vars:9, def-use chains:4",
      "dependencies": "random, logging, typing, httpx, fastapi",
      "code_preview": "async def get_queue(db: Session = Depends(get_db)):\n    \"\"\"Get ComfyUI queue status.\"\"\"\n    url = get_comfy_url(db)\n    try:\n        async with httpx.AsyncClient(timeout=10.0, trust_env=False) as client:\n            response = await client.get(f\"{url}/queue\")\n            response.raise_for_status()\n            return response.json()\n    except Exception as e:"
    },
    {
      "name": "generate_image",
      "qualified_name": "backend.routes.comfy.py.generate_image",
      "file": "backend/routes/comfy.py",
      "line": 64,
      "language": "python",
      "unit_type": "function",
      "signature": "def generate_image(request: ImageGenerateRequest, db: Session)",
      "docstring": "Submit a generation request to ComfyUI.",
      "calls": [
        "get_manager",
        "build_comfy_workflow",
        "get_comfy_url"
      ],
      "called_by": [],
      "cfg_summary": "complexity:1, blocks:2",
      "dfg_summary": "vars:18, def-use chains:18",
      "dependencies": "random, logging, typing, httpx, fastapi",
      "code_preview": "async def generate_image(request: ImageGenerateRequest, db: Session = Depends(get_db)):\n    \"\"\"Submit a generation request to ComfyUI.\"\"\"\n    url = get_comfy_url(db)\n    try:\n        workflow = build_comfy_workflow(request)\n        client_id = f\"wrapper_{random.randint(0, 9999)}\"\n        \n        async with httpx.AsyncClient(timeout=120.0, trust_env=False) as client:\n            response = await client.post(\n                f\"{url}/prompt\","
    },
    {
      "name": "check_status",
      "qualified_name": "backend.routes.comfy.py.check_status",
      "file": "backend/routes/comfy.py",
      "line": 103,
      "language": "python",
      "unit_type": "function",
      "signature": "def check_status(prompt_id: str, db: Session) -> ImageStatusResponse",
      "docstring": "Check the status of a generation.",
      "calls": [
        "get_comfy_url",
        "ImageStatusResponse"
      ],
      "called_by": [],
      "cfg_summary": "complexity:12, blocks:33",
      "dfg_summary": "vars:27, def-use chains:27",
      "dependencies": "random, logging, typing, httpx, fastapi",
      "code_preview": "async def check_status(prompt_id: str, db: Session = Depends(get_db)) -> ImageStatusResponse:\n    \"\"\"Check the status of a generation.\"\"\"\n    url = get_comfy_url(db)\n    try:\n        async with httpx.AsyncClient(timeout=30.0, trust_env=False) as client:\n            # Check queue\n            queue_response = await client.get(f\"{url}/queue\")\n            queue_data = queue_response.json()\n            \n            for item in queue_data.get(\"queue_running\", []):"
    },
    {
      "name": "get_image",
      "qualified_name": "backend.routes.comfy.py.get_image",
      "file": "backend/routes/comfy.py",
      "line": 180,
      "language": "python",
      "unit_type": "function",
      "signature": "def get_image(filename: str, type: str, subfolder: str, db: Session)",
      "docstring": "Proxy image from ComfyUI.",
      "calls": [
        "get_comfy_url"
      ],
      "called_by": [],
      "cfg_summary": "complexity:2, blocks:4",
      "dfg_summary": "vars:15, def-use chains:11",
      "dependencies": "random, logging, typing, httpx, fastapi",
      "code_preview": "async def get_image(\n    filename: str = Query(...),\n    type: str = Query(\"output\"),\n    subfolder: str = Query(\"\"),\n    db: Session = Depends(get_db)\n):\n    \"\"\"Proxy image from ComfyUI.\"\"\"\n    url = get_comfy_url(db)\n    try:\n        image_url = f\"{url}/view?filename={filename}&type={type}\""
    },
    {
      "name": "get_available_loras",
      "qualified_name": "backend.routes.comfy.py.get_available_loras",
      "file": "backend/routes/comfy.py",
      "line": 205,
      "language": "python",
      "unit_type": "function",
      "signature": "def get_available_loras(db: Session)",
      "docstring": "Get list of available LoRAs.",
      "calls": [
        "get_comfy_url"
      ],
      "called_by": [],
      "cfg_summary": "complexity:3, blocks:7",
      "dfg_summary": "vars:15, def-use chains:3",
      "dependencies": "random, logging, typing, httpx, fastapi",
      "code_preview": "async def get_available_loras(db: Session = Depends(get_db)):\n    \"\"\"Get list of available LoRAs.\"\"\"\n    url = get_comfy_url(db)\n    try:\n        async with httpx.AsyncClient(timeout=10.0) as client:\n            response = await client.get(f\"{url}/object_info\")\n            response.raise_for_status()\n            data = response.json()\n            \n            loras = []"
    },
    {
      "name": "get_available_models",
      "qualified_name": "backend.routes.comfy.py.get_available_models",
      "file": "backend/routes/comfy.py",
      "line": 225,
      "language": "python",
      "unit_type": "function",
      "signature": "def get_available_models(db: Session)",
      "docstring": "Get list of available models (checkpoints).",
      "calls": [
        "get_comfy_url"
      ],
      "called_by": [],
      "cfg_summary": "complexity:5, blocks:10",
      "dfg_summary": "vars:14, def-use chains:15",
      "dependencies": "random, logging, typing, httpx, fastapi",
      "code_preview": "async def get_available_models(db: Session = Depends(get_db)):\n    \"\"\"Get list of available models (checkpoints).\"\"\"\n    url = get_comfy_url(db)\n    try:\n        async with httpx.AsyncClient(timeout=10.0) as client:\n            response = await client.get(f\"{url}/object_info\")\n            response.raise_for_status()\n            data = response.json()\n            \n            models = []"
    },
    {
      "name": "interrupt_generation",
      "qualified_name": "backend.routes.comfy.py.interrupt_generation",
      "file": "backend/routes/comfy.py",
      "line": 250,
      "language": "python",
      "unit_type": "function",
      "signature": "def interrupt_generation(db: Session)",
      "docstring": "Interrupt current generation.",
      "calls": [
        "get_comfy_url"
      ],
      "called_by": [],
      "cfg_summary": "complexity:1, blocks:2",
      "dfg_summary": "vars:8, def-use chains:2",
      "dependencies": "random, logging, typing, httpx, fastapi",
      "code_preview": "async def interrupt_generation(db: Session = Depends(get_db)):\n    \"\"\"Interrupt current generation.\"\"\"\n    url = get_comfy_url(db)\n    try:\n        async with httpx.AsyncClient(timeout=10.0, trust_env=False) as client:\n            await client.post(f\"{url}/interrupt\")\n            return {\"status\": \"interrupted\"}\n    except Exception as e:"
    },
    {
      "name": "clear_vram",
      "qualified_name": "backend.routes.comfy.py.clear_vram",
      "file": "backend/routes/comfy.py",
      "line": 261,
      "language": "python",
      "unit_type": "function",
      "signature": "def clear_vram(db: Session)",
      "docstring": "Clear ComfyUI VRAM and RAM.",
      "calls": [
        "get_comfy_url"
      ],
      "called_by": [],
      "cfg_summary": "complexity:1, blocks:2",
      "dfg_summary": "vars:8, def-use chains:2",
      "dependencies": "random, logging, typing, httpx, fastapi",
      "code_preview": "async def clear_vram(db: Session = Depends(get_db)):\n    \"\"\"Clear ComfyUI VRAM and RAM.\"\"\"\n    url = get_comfy_url(db)\n    try:\n        async with httpx.AsyncClient(timeout=10.0, trust_env=False) as client:\n            await client.post(f\"{url}/free\", json={\"unload_models\": True, \"free_memory\": True})\n            return {\"status\": \"cleared\", \"message\": \"VRAM and RAM cleared\"}\n    except Exception as e:"
    },
    {
      "name": "websocket_endpoint",
      "qualified_name": "backend.routes.comfy.py.websocket_endpoint",
      "file": "backend/routes/comfy.py",
      "line": 272,
      "language": "python",
      "unit_type": "function",
      "signature": "def websocket_endpoint(websocket: WebSocket, db: Session)",
      "docstring": "WebSocket endpoint for real-time ComfyUI updates.",
      "calls": [
        "forward_message",
        "get_manager",
        "get_comfy_url"
      ],
      "called_by": [],
      "cfg_summary": "complexity:3, blocks:6",
      "dfg_summary": "vars:11, def-use chains:3",
      "dependencies": "random, logging, typing, httpx, fastapi",
      "code_preview": "async def websocket_endpoint(websocket: WebSocket, db: Session = Depends(get_db)):\n    \"\"\"WebSocket endpoint for real-time ComfyUI updates.\"\"\"\n    await websocket.accept()\n    url = get_comfy_url(db)\n    manager = get_manager(url)\n    \n    async def forward_message(message: Dict):\n        try:\n            await websocket.send_json(message)\n        except Exception:"
    },
    {
      "name": "forward_message",
      "qualified_name": "backend.routes.comfy.py.forward_message",
      "file": "backend/routes/comfy.py",
      "line": 278,
      "language": "python",
      "unit_type": "function",
      "signature": "def forward_message(message: Dict)",
      "docstring": "",
      "calls": [],
      "called_by": [
        "websocket_endpoint"
      ],
      "cfg_summary": "complexity:1, blocks:1",
      "dfg_summary": "vars:2, def-use chains:0",
      "dependencies": "random, logging, typing, httpx, fastapi",
      "code_preview": "    async def forward_message(message: Dict):\n        try:\n            await websocket.send_json(message)\n        except Exception:"
    },
    {
      "name": "get_command_files",
      "qualified_name": "knowledge.claude-code-comfyui-nodes.src.claude_code_comfyui_nodes.claude_code_execute.py.get_command_files",
      "file": "knowledge/claude-code-comfyui-nodes/src/claude_code_comfyui_nodes/claude_code_execute.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def get_command_files(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:4, blocks:9",
      "dfg_summary": "vars:7, def-use chains:7",
      "dependencies": "os, json, uuid, subprocess, pathlib",
      "code_preview": ""
    },
    {
      "name": "INPUT_TYPES",
      "qualified_name": "knowledge.claude-code-comfyui-nodes.src.claude_code_comfyui_nodes.claude_code_execute.py.INPUT_TYPES",
      "file": "knowledge/claude-code-comfyui-nodes/src/claude_code_comfyui_nodes/claude_code_execute.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def INPUT_TYPES(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:1, blocks:2",
      "dfg_summary": "vars:1, def-use chains:0",
      "dependencies": "os, json, uuid, subprocess, pathlib",
      "code_preview": ""
    },
    {
      "name": "__init__",
      "qualified_name": "knowledge.claude-code-comfyui-nodes.src.claude_code_comfyui_nodes.claude_code_execute.py.__init__",
      "file": "knowledge/claude-code-comfyui-nodes/src/claude_code_comfyui_nodes/claude_code_execute.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def __init__(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:1, blocks:1",
      "dfg_summary": "vars:2, def-use chains:0",
      "dependencies": "os, json, uuid, subprocess, pathlib",
      "code_preview": ""
    },
    {
      "name": "send_progress",
      "qualified_name": "knowledge.claude-code-comfyui-nodes.src.claude_code_comfyui_nodes.claude_code_execute.py.send_progress",
      "file": "knowledge/claude-code-comfyui-nodes/src/claude_code_comfyui_nodes/claude_code_execute.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def send_progress(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:2, blocks:3",
      "dfg_summary": "vars:4, def-use chains:3",
      "dependencies": "os, json, uuid, subprocess, pathlib",
      "code_preview": ""
    },
    {
      "name": "replace_arguments",
      "qualified_name": "knowledge.claude-code-comfyui-nodes.src.claude_code_comfyui_nodes.claude_code_execute.py.replace_arguments",
      "file": "knowledge/claude-code-comfyui-nodes/src/claude_code_comfyui_nodes/claude_code_execute.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def replace_arguments(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:2, blocks:5",
      "dfg_summary": "vars:9, def-use chains:7",
      "dependencies": "os, json, uuid, subprocess, pathlib",
      "code_preview": ""
    },
    {
      "name": "generate_output_folder",
      "qualified_name": "knowledge.claude-code-comfyui-nodes.src.claude_code_comfyui_nodes.claude_code_execute.py.generate_output_folder",
      "file": "knowledge/claude-code-comfyui-nodes/src/claude_code_comfyui_nodes/claude_code_execute.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def generate_output_folder(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:1, blocks:2",
      "dfg_summary": "vars:9, def-use chains:7",
      "dependencies": "os, json, uuid, subprocess, pathlib",
      "code_preview": ""
    },
    {
      "name": "build_prompt",
      "qualified_name": "knowledge.claude-code-comfyui-nodes.src.claude_code_comfyui_nodes.claude_code_execute.py.build_prompt",
      "file": "knowledge/claude-code-comfyui-nodes/src/claude_code_comfyui_nodes/claude_code_execute.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def build_prompt(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:4, blocks:8",
      "dfg_summary": "vars:8, def-use chains:22",
      "dependencies": "os, json, uuid, subprocess, pathlib",
      "code_preview": ""
    },
    {
      "name": "setup_mcps_from_config",
      "qualified_name": "knowledge.claude-code-comfyui-nodes.src.claude_code_comfyui_nodes.claude_code_execute.py.setup_mcps_from_config",
      "file": "knowledge/claude-code-comfyui-nodes/src/claude_code_comfyui_nodes/claude_code_execute.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def setup_mcps_from_config(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:5, blocks:13",
      "dfg_summary": "vars:5, def-use chains:18",
      "dependencies": "os, json, uuid, subprocess, pathlib",
      "code_preview": ""
    },
    {
      "name": "load_command_from_file",
      "qualified_name": "knowledge.claude-code-comfyui-nodes.src.claude_code_comfyui_nodes.claude_code_execute.py.load_command_from_file",
      "file": "knowledge/claude-code-comfyui-nodes/src/claude_code_comfyui_nodes/claude_code_execute.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def load_command_from_file(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:3, blocks:8",
      "dfg_summary": "vars:10, def-use chains:5",
      "dependencies": "os, json, uuid, subprocess, pathlib",
      "code_preview": ""
    },
    {
      "name": "execute",
      "qualified_name": "knowledge.claude-code-comfyui-nodes.src.claude_code_comfyui_nodes.claude_code_execute.py.execute",
      "file": "knowledge/claude-code-comfyui-nodes/src/claude_code_comfyui_nodes/claude_code_execute.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def execute(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:14, blocks:31",
      "dfg_summary": "vars:43, def-use chains:121",
      "dependencies": "os, json, uuid, subprocess, pathlib",
      "code_preview": ""
    },
    {
      "name": "ClaudeCodeExecute",
      "qualified_name": "knowledge.claude-code-comfyui-nodes.src.claude_code_comfyui_nodes.claude_code_execute.py.ClaudeCodeExecute",
      "file": "knowledge/claude-code-comfyui-nodes/src/claude_code_comfyui_nodes/claude_code_execute.py",
      "line": 15,
      "language": "python",
      "unit_type": "class",
      "signature": "class ClaudeCodeExecute",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "",
      "dfg_summary": "",
      "dependencies": "os, json, uuid, subprocess, pathlib",
      "code_preview": ""
    },
    {
      "name": "INPUT_TYPES",
      "qualified_name": "knowledge.claude-code-comfyui-nodes.src.claude_code_comfyui_nodes.claude_reddit_scraper.py.INPUT_TYPES",
      "file": "knowledge/claude-code-comfyui-nodes/src/claude_code_comfyui_nodes/claude_reddit_scraper.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def INPUT_TYPES(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:1, blocks:2",
      "dfg_summary": "vars:1, def-use chains:0",
      "dependencies": "json, subprocess, typing, datetime, os",
      "code_preview": ""
    },
    {
      "name": "__init__",
      "qualified_name": "knowledge.claude-code-comfyui-nodes.src.claude_code_comfyui_nodes.claude_reddit_scraper.py.__init__",
      "file": "knowledge/claude-code-comfyui-nodes/src/claude_code_comfyui_nodes/claude_reddit_scraper.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def __init__(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:1, blocks:1",
      "dfg_summary": "vars:2, def-use chains:0",
      "dependencies": "json, subprocess, typing, datetime, os",
      "code_preview": ""
    },
    {
      "name": "send_progress",
      "qualified_name": "knowledge.claude-code-comfyui-nodes.src.claude_code_comfyui_nodes.claude_reddit_scraper.py.send_progress",
      "file": "knowledge/claude-code-comfyui-nodes/src/claude_code_comfyui_nodes/claude_reddit_scraper.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def send_progress(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:2, blocks:3",
      "dfg_summary": "vars:4, def-use chains:3",
      "dependencies": "json, subprocess, typing, datetime, os",
      "code_preview": ""
    },
    {
      "name": "ensure_playwright_mcp",
      "qualified_name": "knowledge.claude-code-comfyui-nodes.src.claude_code_comfyui_nodes.claude_reddit_scraper.py.ensure_playwright_mcp",
      "file": "knowledge/claude-code-comfyui-nodes/src/claude_code_comfyui_nodes/claude_reddit_scraper.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def ensure_playwright_mcp(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:4, blocks:11",
      "dfg_summary": "vars:10, def-use chains:13",
      "dependencies": "json, subprocess, typing, datetime, os",
      "code_preview": ""
    },
    {
      "name": "build_reddit_url",
      "qualified_name": "knowledge.claude-code-comfyui-nodes.src.claude_code_comfyui_nodes.claude_reddit_scraper.py.build_reddit_url",
      "file": "knowledge/claude-code-comfyui-nodes/src/claude_code_comfyui_nodes/claude_reddit_scraper.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def build_reddit_url(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:6, blocks:22",
      "dfg_summary": "vars:7, def-use chains:12",
      "dependencies": "json, subprocess, typing, datetime, os",
      "code_preview": ""
    },
    {
      "name": "build_scraping_prompt",
      "qualified_name": "knowledge.claude-code-comfyui-nodes.src.claude_code_comfyui_nodes.claude_reddit_scraper.py.build_scraping_prompt",
      "file": "knowledge/claude-code-comfyui-nodes/src/claude_code_comfyui_nodes/claude_reddit_scraper.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def build_scraping_prompt(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:7, blocks:15",
      "dfg_summary": "vars:10, def-use chains:110",
      "dependencies": "json, subprocess, typing, datetime, os",
      "code_preview": ""
    },
    {
      "name": "generate_output_folder",
      "qualified_name": "knowledge.claude-code-comfyui-nodes.src.claude_code_comfyui_nodes.claude_reddit_scraper.py.generate_output_folder",
      "file": "knowledge/claude-code-comfyui-nodes/src/claude_code_comfyui_nodes/claude_reddit_scraper.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def generate_output_folder(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:1, blocks:2",
      "dfg_summary": "vars:9, def-use chains:7",
      "dependencies": "json, subprocess, typing, datetime, os",
      "code_preview": ""
    },
    {
      "name": "read_scraped_data",
      "qualified_name": "knowledge.claude-code-comfyui-nodes.src.claude_code_comfyui_nodes.claude_reddit_scraper.py.read_scraped_data",
      "file": "knowledge/claude-code-comfyui-nodes/src/claude_code_comfyui_nodes/claude_reddit_scraper.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def read_scraped_data(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:9, blocks:23",
      "dfg_summary": "vars:17, def-use chains:28",
      "dependencies": "json, subprocess, typing, datetime, os",
      "code_preview": ""
    },
    {
      "name": "scrape_reddit",
      "qualified_name": "knowledge.claude-code-comfyui-nodes.src.claude_code_comfyui_nodes.claude_reddit_scraper.py.scrape_reddit",
      "file": "knowledge/claude-code-comfyui-nodes/src/claude_code_comfyui_nodes/claude_reddit_scraper.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def scrape_reddit(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:6, blocks:14",
      "dfg_summary": "vars:38, def-use chains:78",
      "dependencies": "json, subprocess, typing, datetime, os",
      "code_preview": ""
    },
    {
      "name": "ClaudeRedditScraper",
      "qualified_name": "knowledge.claude-code-comfyui-nodes.src.claude_code_comfyui_nodes.claude_reddit_scraper.py.ClaudeRedditScraper",
      "file": "knowledge/claude-code-comfyui-nodes/src/claude_code_comfyui_nodes/claude_reddit_scraper.py",
      "line": 19,
      "language": "python",
      "unit_type": "class",
      "signature": "class ClaudeRedditScraper",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "",
      "dfg_summary": "",
      "dependencies": "json, subprocess, typing, datetime, os",
      "code_preview": ""
    },
    {
      "name": "override_get_db",
      "qualified_name": "backend.tests.test_aspect_ratio_gallery_e2e.py.override_get_db",
      "file": "backend/tests/test_aspect_ratio_gallery_e2e.py",
      "line": 27,
      "language": "python",
      "unit_type": "function",
      "signature": "def override_get_db()",
      "docstring": "",
      "calls": [],
      "called_by": [
        "<module>"
      ],
      "cfg_summary": "complexity:1, blocks:1",
      "dfg_summary": "vars:2, def-use chains:0",
      "dependencies": "pytest, unittest.mock, fastapi.testclient, sqlalchemy, sqlalchemy.orm",
      "code_preview": "def override_get_db():\n    db = TestingSessionLocal()\n    try:\n        yield db\n    finally:"
    },
    {
      "name": "setup_teardown_db",
      "qualified_name": "backend.tests.test_aspect_ratio_gallery_e2e.py.setup_teardown_db",
      "file": "backend/tests/test_aspect_ratio_gallery_e2e.py",
      "line": 40,
      "language": "python",
      "unit_type": "function",
      "signature": "def setup_teardown_db()",
      "docstring": "Create tables before each test, drop after.",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:1, blocks:1",
      "dfg_summary": "vars:4, def-use chains:0",
      "dependencies": "pytest, unittest.mock, fastapi.testclient, sqlalchemy, sqlalchemy.orm",
      "code_preview": "def setup_teardown_db():\n    \"\"\"Create tables before each test, drop after.\"\"\"\n    Base.metadata.create_all(bind=engine)\n    # Patch SessionLocal in websocket_manager so _auto_save_images uses test DB\n    with patch(\"services.websocket_manager.SessionLocal\", TestingSessionLocal):\n        yield"
    },
    {
      "name": "test_workflow_dimensions_set_correctly",
      "qualified_name": "backend.tests.test_aspect_ratio_gallery_e2e.py.test_workflow_dimensions_set_correctly",
      "file": "backend/tests/test_aspect_ratio_gallery_e2e.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def test_workflow_dimensions_set_correctly(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:1, blocks:1",
      "dfg_summary": "vars:6, def-use chains:0",
      "dependencies": "pytest, unittest.mock, fastapi.testclient, sqlalchemy, sqlalchemy.orm",
      "code_preview": ""
    },
    {
      "name": "test_workflow_dimensions_turbo_aio",
      "qualified_name": "backend.tests.test_aspect_ratio_gallery_e2e.py.test_workflow_dimensions_turbo_aio",
      "file": "backend/tests/test_aspect_ratio_gallery_e2e.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def test_workflow_dimensions_turbo_aio(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:1, blocks:1",
      "dfg_summary": "vars:6, def-use chains:0",
      "dependencies": "pytest, unittest.mock, fastapi.testclient, sqlalchemy, sqlalchemy.orm",
      "code_preview": ""
    },
    {
      "name": "test_workflow_dimensions_flux",
      "qualified_name": "backend.tests.test_aspect_ratio_gallery_e2e.py.test_workflow_dimensions_flux",
      "file": "backend/tests/test_aspect_ratio_gallery_e2e.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def test_workflow_dimensions_flux(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:1, blocks:1",
      "dfg_summary": "vars:6, def-use chains:0",
      "dependencies": "pytest, unittest.mock, fastapi.testclient, sqlalchemy, sqlalchemy.orm",
      "code_preview": ""
    },
    {
      "name": "test_workflow_dimensions_basic",
      "qualified_name": "backend.tests.test_aspect_ratio_gallery_e2e.py.test_workflow_dimensions_basic",
      "file": "backend/tests/test_aspect_ratio_gallery_e2e.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def test_workflow_dimensions_basic(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:1, blocks:1",
      "dfg_summary": "vars:6, def-use chains:0",
      "dependencies": "pytest, unittest.mock, fastapi.testclient, sqlalchemy, sqlalchemy.orm",
      "code_preview": ""
    },
    {
      "name": "test_default_dimensions",
      "qualified_name": "backend.tests.test_aspect_ratio_gallery_e2e.py.test_default_dimensions",
      "file": "backend/tests/test_aspect_ratio_gallery_e2e.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def test_default_dimensions(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:1, blocks:1",
      "dfg_summary": "vars:5, def-use chains:0",
      "dependencies": "pytest, unittest.mock, fastapi.testclient, sqlalchemy, sqlalchemy.orm",
      "code_preview": ""
    },
    {
      "name": "_make_gallery_item",
      "qualified_name": "backend.tests.test_aspect_ratio_gallery_e2e.py._make_gallery_item",
      "file": "backend/tests/test_aspect_ratio_gallery_e2e.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def _make_gallery_item(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:1, blocks:2",
      "dfg_summary": "vars:4, def-use chains:0",
      "dependencies": "pytest, unittest.mock, fastapi.testclient, sqlalchemy, sqlalchemy.orm",
      "code_preview": ""
    },
    {
      "name": "test_save_and_retrieve_aspect_ratio",
      "qualified_name": "backend.tests.test_aspect_ratio_gallery_e2e.py.test_save_and_retrieve_aspect_ratio",
      "file": "backend/tests/test_aspect_ratio_gallery_e2e.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def test_save_and_retrieve_aspect_ratio(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:1, blocks:1",
      "dfg_summary": "vars:8, def-use chains:0",
      "dependencies": "pytest, unittest.mock, fastapi.testclient, sqlalchemy, sqlalchemy.orm",
      "code_preview": ""
    },
    {
      "name": "test_gallery_multiple_aspect_ratios",
      "qualified_name": "backend.tests.test_aspect_ratio_gallery_e2e.py.test_gallery_multiple_aspect_ratios",
      "file": "backend/tests/test_aspect_ratio_gallery_e2e.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def test_gallery_multiple_aspect_ratios(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:3, blocks:7",
      "dfg_summary": "vars:13, def-use chains:10",
      "dependencies": "pytest, unittest.mock, fastapi.testclient, sqlalchemy, sqlalchemy.orm",
      "code_preview": ""
    },
    {
      "name": "test_gallery_delete_preserves_others",
      "qualified_name": "backend.tests.test_aspect_ratio_gallery_e2e.py.test_gallery_delete_preserves_others",
      "file": "backend/tests/test_aspect_ratio_gallery_e2e.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def test_gallery_delete_preserves_others(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:1, blocks:1",
      "dfg_summary": "vars:10, def-use chains:0",
      "dependencies": "pytest, unittest.mock, fastapi.testclient, sqlalchemy, sqlalchemy.orm",
      "code_preview": ""
    },
    {
      "name": "test_gallery_clear_all",
      "qualified_name": "backend.tests.test_aspect_ratio_gallery_e2e.py.test_gallery_clear_all",
      "file": "backend/tests/test_aspect_ratio_gallery_e2e.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def test_gallery_clear_all(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:2, blocks:4",
      "dfg_summary": "vars:8, def-use chains:4",
      "dependencies": "pytest, unittest.mock, fastapi.testclient, sqlalchemy, sqlalchemy.orm",
      "code_preview": ""
    },
    {
      "name": "_make_gallery_item",
      "qualified_name": "backend.tests.test_aspect_ratio_gallery_e2e.py._make_gallery_item",
      "file": "backend/tests/test_aspect_ratio_gallery_e2e.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def _make_gallery_item(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:1, blocks:2",
      "dfg_summary": "vars:4, def-use chains:0",
      "dependencies": "pytest, unittest.mock, fastapi.testclient, sqlalchemy, sqlalchemy.orm",
      "code_preview": ""
    },
    {
      "name": "test_full_e2e_aspect_ratio_flow",
      "qualified_name": "backend.tests.test_aspect_ratio_gallery_e2e.py.test_full_e2e_aspect_ratio_flow",
      "file": "backend/tests/test_aspect_ratio_gallery_e2e.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def test_full_e2e_aspect_ratio_flow(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:3, blocks:7",
      "dfg_summary": "vars:20, def-use chains:27",
      "dependencies": "pytest, unittest.mock, fastapi.testclient, sqlalchemy, sqlalchemy.orm",
      "code_preview": ""
    },
    {
      "name": "test_gallery_refresh_ordering",
      "qualified_name": "backend.tests.test_aspect_ratio_gallery_e2e.py.test_gallery_refresh_ordering",
      "file": "backend/tests/test_aspect_ratio_gallery_e2e.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def test_gallery_refresh_ordering(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:2, blocks:4",
      "dfg_summary": "vars:7, def-use chains:5",
      "dependencies": "pytest, unittest.mock, fastapi.testclient, sqlalchemy, sqlalchemy.orm",
      "code_preview": ""
    },
    {
      "name": "test_gallery_refresh_after_delete",
      "qualified_name": "backend.tests.test_aspect_ratio_gallery_e2e.py.test_gallery_refresh_after_delete",
      "file": "backend/tests/test_aspect_ratio_gallery_e2e.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def test_gallery_refresh_after_delete(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:5, blocks:12",
      "dfg_summary": "vars:13, def-use chains:12",
      "dependencies": "pytest, unittest.mock, fastapi.testclient, sqlalchemy, sqlalchemy.orm",
      "code_preview": ""
    },
    {
      "name": "test_gallery_limit_parameter",
      "qualified_name": "backend.tests.test_aspect_ratio_gallery_e2e.py.test_gallery_limit_parameter",
      "file": "backend/tests/test_aspect_ratio_gallery_e2e.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def test_gallery_limit_parameter(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:2, blocks:4",
      "dfg_summary": "vars:7, def-use chains:3",
      "dependencies": "pytest, unittest.mock, fastapi.testclient, sqlalchemy, sqlalchemy.orm",
      "code_preview": ""
    },
    {
      "name": "test_very_large_dimensions",
      "qualified_name": "backend.tests.test_aspect_ratio_gallery_e2e.py.test_very_large_dimensions",
      "file": "backend/tests/test_aspect_ratio_gallery_e2e.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def test_very_large_dimensions(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:1, blocks:1",
      "dfg_summary": "vars:4, def-use chains:0",
      "dependencies": "pytest, unittest.mock, fastapi.testclient, sqlalchemy, sqlalchemy.orm",
      "code_preview": ""
    },
    {
      "name": "test_small_dimensions",
      "qualified_name": "backend.tests.test_aspect_ratio_gallery_e2e.py.test_small_dimensions",
      "file": "backend/tests/test_aspect_ratio_gallery_e2e.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def test_small_dimensions(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:1, blocks:1",
      "dfg_summary": "vars:4, def-use chains:0",
      "dependencies": "pytest, unittest.mock, fastapi.testclient, sqlalchemy, sqlalchemy.orm",
      "code_preview": ""
    },
    {
      "name": "test_non_standard_aspect_ratio",
      "qualified_name": "backend.tests.test_aspect_ratio_gallery_e2e.py.test_non_standard_aspect_ratio",
      "file": "backend/tests/test_aspect_ratio_gallery_e2e.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def test_non_standard_aspect_ratio(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:1, blocks:1",
      "dfg_summary": "vars:6, def-use chains:0",
      "dependencies": "pytest, unittest.mock, fastapi.testclient, sqlalchemy, sqlalchemy.orm",
      "code_preview": ""
    },
    {
      "name": "test_workflow_batch_size_with_aspect_ratio",
      "qualified_name": "backend.tests.test_aspect_ratio_gallery_e2e.py.test_workflow_batch_size_with_aspect_ratio",
      "file": "backend/tests/test_aspect_ratio_gallery_e2e.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def test_workflow_batch_size_with_aspect_ratio(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:1, blocks:1",
      "dfg_summary": "vars:5, def-use chains:0",
      "dependencies": "pytest, unittest.mock, fastapi.testclient, sqlalchemy, sqlalchemy.orm",
      "code_preview": ""
    },
    {
      "name": "_setup_manager",
      "qualified_name": "backend.tests.test_aspect_ratio_gallery_e2e.py._setup_manager",
      "file": "backend/tests/test_aspect_ratio_gallery_e2e.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def _setup_manager(...)",
      "docstring": "",
      "calls": [
        "ComfyWebSocketManager"
      ],
      "called_by": [],
      "cfg_summary": "complexity:1, blocks:2",
      "dfg_summary": "vars:3, def-use chains:1",
      "dependencies": "pytest, unittest.mock, fastapi.testclient, sqlalchemy, sqlalchemy.orm",
      "code_preview": ""
    },
    {
      "name": "test_auto_save_flat_output_format",
      "qualified_name": "backend.tests.test_aspect_ratio_gallery_e2e.py.test_auto_save_flat_output_format",
      "file": "backend/tests/test_aspect_ratio_gallery_e2e.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def test_auto_save_flat_output_format(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:1, blocks:1",
      "dfg_summary": "vars:9, def-use chains:0",
      "dependencies": "pytest, unittest.mock, fastapi.testclient, sqlalchemy, sqlalchemy.orm",
      "code_preview": ""
    },
    {
      "name": "test_auto_save_nested_output_format",
      "qualified_name": "backend.tests.test_aspect_ratio_gallery_e2e.py.test_auto_save_nested_output_format",
      "file": "backend/tests/test_aspect_ratio_gallery_e2e.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def test_auto_save_nested_output_format(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:1, blocks:1",
      "dfg_summary": "vars:9, def-use chains:0",
      "dependencies": "pytest, unittest.mock, fastapi.testclient, sqlalchemy, sqlalchemy.orm",
      "code_preview": ""
    },
    {
      "name": "test_auto_save_batch_multiple_images",
      "qualified_name": "backend.tests.test_aspect_ratio_gallery_e2e.py.test_auto_save_batch_multiple_images",
      "file": "backend/tests/test_aspect_ratio_gallery_e2e.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def test_auto_save_batch_multiple_images(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:2, blocks:4",
      "dfg_summary": "vars:10, def-use chains:2",
      "dependencies": "pytest, unittest.mock, fastapi.testclient, sqlalchemy, sqlalchemy.orm",
      "code_preview": ""
    },
    {
      "name": "test_auto_save_triggers_gallery_refresh",
      "qualified_name": "backend.tests.test_aspect_ratio_gallery_e2e.py.test_auto_save_triggers_gallery_refresh",
      "file": "backend/tests/test_aspect_ratio_gallery_e2e.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def test_auto_save_triggers_gallery_refresh(...)",
      "docstring": "",
      "calls": [
        "capture_broadcast"
      ],
      "called_by": [],
      "cfg_summary": "complexity:1, blocks:1",
      "dfg_summary": "vars:10, def-use chains:0",
      "dependencies": "pytest, unittest.mock, fastapi.testclient, sqlalchemy, sqlalchemy.orm",
      "code_preview": ""
    },
    {
      "name": "test_auto_save_no_metadata_does_nothing",
      "qualified_name": "backend.tests.test_aspect_ratio_gallery_e2e.py.test_auto_save_no_metadata_does_nothing",
      "file": "backend/tests/test_aspect_ratio_gallery_e2e.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def test_auto_save_no_metadata_does_nothing(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:1, blocks:1",
      "dfg_summary": "vars:8, def-use chains:0",
      "dependencies": "pytest, unittest.mock, fastapi.testclient, sqlalchemy, sqlalchemy.orm",
      "code_preview": ""
    },
    {
      "name": "test_auto_save_preserves_aspect_ratio_per_prompt",
      "qualified_name": "backend.tests.test_aspect_ratio_gallery_e2e.py.test_auto_save_preserves_aspect_ratio_per_prompt",
      "file": "backend/tests/test_aspect_ratio_gallery_e2e.py",
      "line": 1,
      "language": "python",
      "unit_type": "function",
      "signature": "def test_auto_save_preserves_aspect_ratio_per_prompt(...)",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "complexity:3, blocks:7",
      "dfg_summary": "vars:12, def-use chains:22",
      "dependencies": "pytest, unittest.mock, fastapi.testclient, sqlalchemy, sqlalchemy.orm",
      "code_preview": ""
    },
    {
      "name": "TestWorkflowBuilderAspectRatio",
      "qualified_name": "backend.tests.test_aspect_ratio_gallery_e2e.py.TestWorkflowBuilderAspectRatio",
      "file": "backend/tests/test_aspect_ratio_gallery_e2e.py",
      "line": 64,
      "language": "python",
      "unit_type": "class",
      "signature": "class TestWorkflowBuilderAspectRatio",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "",
      "dfg_summary": "",
      "dependencies": "pytest, unittest.mock, fastapi.testclient, sqlalchemy, sqlalchemy.orm",
      "code_preview": ""
    },
    {
      "name": "TestGalleryCRUD",
      "qualified_name": "backend.tests.test_aspect_ratio_gallery_e2e.py.TestGalleryCRUD",
      "file": "backend/tests/test_aspect_ratio_gallery_e2e.py",
      "line": 152,
      "language": "python",
      "unit_type": "class",
      "signature": "class TestGalleryCRUD",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "",
      "dfg_summary": "",
      "dependencies": "pytest, unittest.mock, fastapi.testclient, sqlalchemy, sqlalchemy.orm",
      "code_preview": ""
    },
    {
      "name": "TestGalleryRefreshE2E",
      "qualified_name": "backend.tests.test_aspect_ratio_gallery_e2e.py.TestGalleryRefreshE2E",
      "file": "backend/tests/test_aspect_ratio_gallery_e2e.py",
      "line": 253,
      "language": "python",
      "unit_type": "class",
      "signature": "class TestGalleryRefreshE2E",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "",
      "dfg_summary": "",
      "dependencies": "pytest, unittest.mock, fastapi.testclient, sqlalchemy, sqlalchemy.orm",
      "code_preview": ""
    },
    {
      "name": "TestAspectRatioEdgeCases",
      "qualified_name": "backend.tests.test_aspect_ratio_gallery_e2e.py.TestAspectRatioEdgeCases",
      "file": "backend/tests/test_aspect_ratio_gallery_e2e.py",
      "line": 384,
      "language": "python",
      "unit_type": "class",
      "signature": "class TestAspectRatioEdgeCases",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "",
      "dfg_summary": "",
      "dependencies": "pytest, unittest.mock, fastapi.testclient, sqlalchemy, sqlalchemy.orm",
      "code_preview": ""
    },
    {
      "name": "TestAutoSaveFlow",
      "qualified_name": "backend.tests.test_aspect_ratio_gallery_e2e.py.TestAutoSaveFlow",
      "file": "backend/tests/test_aspect_ratio_gallery_e2e.py",
      "line": 466,
      "language": "python",
      "unit_type": "class",
      "signature": "class TestAutoSaveFlow",
      "docstring": "",
      "calls": [],
      "called_by": [],
      "cfg_summary": "",
      "dfg_summary": "",
      "dependencies": "pytest, unittest.mock, fastapi.testclient, sqlalchemy, sqlalchemy.orm",
      "code_preview": ""
    }
  ],
  "model": "BAAI/bge-large-en-v1.5",
  "dimension": 1024,
  "count": 156
}